/**
 * @license
 *
 * Bring
 * loads data with several options (cache, callback, progress bar ...)
 * @author idomusha / https://github.com/idomusha
 *
 * Dependencies:
 *  - NProgress [OPTIONAL]
 */
!function(window,$){var s,Bring={defaults:{ready:!0,debug:!1,oDataCache:{}},options:{},settings:{},init:function(){this.settings=$.extend({},this.defaults,this.options),s=this.settings,s.debug&&console.log("##################### init()")},load:function(options){options=$.extend({url:"",returned:"html",callback:null,param:{},request:"GET",loader:null,fail:null},options),s.debug&&console.log("##################### load()");var loading,failed,succeed;loading=function(jqXHR,settings){s.debug&&console.log("~~~~~~~~ beforeSend ~~~~~~~~"),s.ready=!1,$("body").addClass("js-bring-loading"),$.isFunction(options.loader)&&eval(options.loader());try{NProgress.start()}catch(e){console.info("Bring: NProgress is not installed.")}},succeed=function(data){s.debug&&console.log("~~~~~~~~ success ~~~~~~~~"),s.ready=!0,$("body").removeClass("js-bring-loading");try{NProgress.done()}catch(e){}s.oDataCache[options.url]=data,$.isFunction(options.callback)&&eval(options.callback(data))},failed=function(jqXHR,textStatus,errorThrown){s.debug&&console.log("~~~~~~~~ error ~~~~~~~~"),s.ready=!0,$("body").removeClass("js-bring-loading");try{NProgress.done()}catch(e){}$.isFunction(options.fail)&&eval(options.fail())},$.ajax({cache:!1,type:options.request,url:options.url,data:options.param,dataType:options.returned,error:failed,beforeSend:loading,success:succeed})},destroy:function(){s.debug&&console.log("##################### destroy()"),$.removeData(Bring.get(0))},refresh:function(){s.debug&&console.log("##################### refresh()"),Bring.destroy(),Bring.init()}};window.Bring=Bring,Bring.init()}(window,jQuery);